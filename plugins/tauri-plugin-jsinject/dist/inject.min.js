var D=Object.defineProperty,l=(e,t)=>{for(var n in t)D(e,n,{get:t[n],enumerable:!0})},O={};l(O,{convertFileSrc:()=>f,invoke:()=>d,transformCallback:()=>i});function W(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function i(e,t=!1){let n=W(),a=`_${n}`;return Object.defineProperty(window,a,{value:r=>(t&&Reflect.deleteProperty(window,a),e==null?void 0:e(r)),writable:!1,configurable:!0}),n}async function d(e,t={}){return new Promise((n,a)=>{let r=i(o=>{n(o),Reflect.deleteProperty(window,`_${c}`)},!0),c=i(o=>{a(o),Reflect.deleteProperty(window,`_${r}`)},!0);window.__TAURI_IPC__({cmd:e,callback:r,error:c,...t})})}function f(e,t="asset"){let n=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?`https://${t}.localhost/${n}`:`${t}://localhost/${n}`}async function u(e){return d("tauri",e)}var I={};l(I,{TauriEvent:()=>E,emit:()=>w,listen:()=>p,once:()=>m});async function s(e,t){return u({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function v(e,t,n){await u({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:n}})}async function _(e,t,n){return u({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:i(n)}}).then(a=>async()=>s(e,a))}async function y(e,t,n){return _(e,t,a=>{n(a),s(e,a.id).catch(()=>{})})}var E=(e=>(e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress",e))(E||{});async function p(e,t){return _(e,null,t)}async function m(e,t){return y(e,null,t)}async function w(e,t){return v(e,void 0,t)}console.log("[tauri-plugin-jsinject/inject.ts] inject common js into webview with url ",window.location.href);window.addEventListener("DOMContentLoaded",async e=>{await w("InjectInited",{loggedIn:!0,token:"[inject.ts] init",type:e.type})});
