var f=Object.defineProperty,d=(e,t)=>{for(var n in t)f(e,n,{get:t[n],enumerable:!0})},O={};d(O,{convertFileSrc:()=>v,invoke:()=>s,transformCallback:()=>i});function W(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function i(e,t=!1){let n=W(),r=`_${n}`;return Object.defineProperty(window,r,{value:a=>(t&&Reflect.deleteProperty(window,r),e==null?void 0:e(a)),writable:!1,configurable:!0}),n}async function s(e,t={}){return new Promise((n,r)=>{let a=i(o=>{n(o),Reflect.deleteProperty(window,`_${c}`)},!0),c=i(o=>{r(o),Reflect.deleteProperty(window,`_${a}`)},!0);window.__TAURI_IPC__({cmd:e,callback:a,error:c,...t})})}function v(e,t="asset"){let n=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?`https://${t}.localhost/${n}`:`${t}://localhost/${n}`}async function u(e){return s("tauri",e)}var I={};d(I,{TauriEvent:()=>E,emit:()=>D,listen:()=>m,once:()=>A});async function _(e,t){return u({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function p(e,t,n){await u({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:n}})}async function w(e,t,n){return u({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:i(n)}}).then(r=>async()=>_(e,r))}async function y(e,t,n){return w(e,t,r=>{n(r),_(e,r.id).catch(()=>{})})}var E=(e=>(e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress",e))(E||{});async function m(e,t){return w(e,null,t)}async function A(e,t){return y(e,null,t)}async function D(e,t){return p(e,void 0,t)}let l="null";console.log("[tauri-plugin-jsinject/inject.ts] inject common js into webview with url ",window.location.href);window.addEventListener("DOMContentLoaded",async e=>{window.location.href!==l&&(await D("InjectInited",{logged_in:!0,token:"[inject.ts] init",type:e.type,url:window.location.href}),l=window.location.href)});
